<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
  Overview &ndash; CLIPPER
</title>
    <link rel="stylesheet" href="static/style.css"/>
    
  <link rel="stylesheet" href="static/highlight.css"/>
  <script src="static/highlight.js"></script>
  <style>
   /* Highlight the current top-level TOC item, and hide the TOC of all other items */

   .toc a[data-node="overview"] {
       color: #AD3108;
   }

   .toc ol {
       display: none;
   }

   .toc > ol {
       display: block;
   }

   .toc li a[data-node="overview"] + ol {
       display: block;
   }

   .toc li a[data-node="overview"] + ol li {
       font-size: 16px;
       margin: 0 10px;
   }

   .toc li a[active] + ol li:first-child {
       margin-top: 5px;
   }
  </style>

  </head>
  <body>
    
  <h1 class="doc-title">CLIPPER Â» Overview</h1>
  <article id="article" data-section="overview">
    <aside>
      <ol class="toc"><li><a href="overview.html" data-node="overview">Overview</a><ol><li><a href="overview.html#description" data-node="description">Description</a></li><li><a href="overview.html#examples" data-node="examples">Examples</a><ol><li><a href="overview.html#1.-usage" data-node="1.-usage">1. usage</a></li></ol></li><li><a href="overview.html#author" data-node="author">Author</a></li><li><a href="overview.html#licence" data-node="licence">Licence</a></li></ol></li><li><a href="globals.html" data-node="globals">Globals</a></li><li><a href="functions.html" data-node="functions">Functions</a></li><li><a href="gereric-functions.html" data-node="gereric-functions">Gereric Functions</a></li><li><a href="conditions.html" data-node="conditions">Conditions</a></li></ol>
    </aside>
    <main class="codex-section">
      <a href="https://circleci.com/gh/Rudolph-Miller/clipper"><img src="https://circleci.com/gh/Rudolph-Miller/clipper.svg"/></a><a href="https://coveralls.io/repos/Rudolph-Miller/clipper"><img src="https://coveralls.io/repos/Rudolph-Miller/clipper/badge.svg"/></a><a href="http://quickdocs.org/clipper/"><img src="http://quickdocs.org/badge/clipper.svg"/></a><h1 id="description">Description</h1>
File attachment library.
<h1 id="examples">Examples</h1><h2 id="1.-usage">1. usage</h2><pre><code class="lisp">(in-package :cl-user)
(defpackage clipper.sample
  (:use :cl
        :integral
        :clipper))
(in-package :clipper.sample)

(connect-toplevel :mysql :database-name &quot;clipper_sample&quot; :username &quot;root&quot;)

(defclass picture ()
  ((id :col-type (:integer 11)
       :primary-key t
       :auto-increment t
       :not-null t
       :initarg :id)
   (image-file-name :col-type (:varchar 255)
                    :initarg :image-file-name)
   (image-content-type :col-type (:varchar 255)
                       :initarg :image-content-type)
   (image-file-size :col-type (:integer 11)
                    :initarg :image-file-size)
   (url :type string
        :initarg :url))
  (:metaclass &lt;dao-table-class&gt;)
  (:table-name &quot;pictures&quot;))

(setup-clipper :store-type :s3
               :aws-access-key (asdf::getenv &quot;AWS_ACCESS_KEY&quot;)
               :aws-secret-key (asdf::getenv &quot;AWS_SECRET_KEY&quot;)
               :s3-endpoint &quot;s3-ap-northeast-1.amazonaws.com&quot;
               :s3-bucket-name &quot;clipper-sample&quot;
               :clipper-class (find-class 'picture)
               :format &quot;:ID/:FILE-NAME.:EXTENSION&quot;)

(let ((object (create-dao 'picture)))
  (save-dao (attach-image object :url &quot;http://www.lisperati.com/lisplogo_alien_256.png&quot;))
  (image-url object))

=&gt; &quot;https://s3-ap-northeast-1.amazonaws.com/clipper-sample/1/lisplogo_alien_256.png&quot;

(setup-clipper :store-type :local
               :image-directory #P&quot;/home/cl-user/common-lisp/clipper/images/&quot;
               :relative #P&quot;/home/cl-user/common-lisp/clipper/&quot;
               :prefix &quot;http://localhost:3000/&quot;
               :clipper-class (find-class 'picture)
               :format &quot;:ID/:FILE-NAME.:EXTENSION&quot;)

(let ((object (create-dao 'picture)))
  (save-dao (attach-image object :url &quot;http://www.lisperati.com/lisplogo_alien_256.png&quot;))
  (image-url object))

=&gt; &quot;http://localhsot:3000/images/2/lisplogo_alien_256.png&quot;
</code></pre><h1 id="author">Author</h1><b>Rudolph-Miller</b><h1 id="licence">Licence</h1>
MIT

    </main>
  </article>
  <footer>
    <div class="info">
      Created with <a href="https://github.com/CommonDoc/codex">Codex</a>.
    </div>
  </footer>
  <script>
   HighlightLisp.highlight_auto();
  </script>

  </body>
</html>
